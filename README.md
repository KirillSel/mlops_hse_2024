# MLOps API Service HSE

## Описание
Этот проект реализует MLOps сервис с API, позволяющим обучать и управлять несколькими ML-моделями с настройкой гиперпараметров, выполнять предсказания и управлять обученными моделями.

## Состав группы
- Селиванов Кирилл
- Мадхаван Дэниш

## Функциональные возможности

- **Обучение модели** с возможностью настройки гиперпараметров и указания количества признаков
- **Список доступных моделей** для предсказания
- **Предсказание** с использованием выбранной модели
- **Переобучение и удаление** обученных моделей
- **Проверка статуса** сервиса через отдельный эндпоинт
- **Интерактивный дашборд** для работы с API с использованием Streamlit

## Требования

- Python 3.11
- Poetry для управления зависимостями

## Установка

1. Клонируйте репозиторий:
    bash ↓
    git clone <URL>
    cd mlops_project

2. Запустите сервер FastAPI:
    bash ↓
    poetry run uvicorn mlops_service.main:app --reload

3. В отдельном терминале запустите дашборд Streamlit:
    bash ↓
    poetry run streamlit run dashboard.py

Дашборд будет доступен по адресу: http://localhost:8501

## Запуск gRPC сервера:
Запустите gRPC сервер для обработки запросов gRPC.
    bash ↓
    PYTHONPATH=$(pwd) poetry run python mlops_service/grpc/server.py

gRPC сервер будет запущен на порту 50051.

## Пример запуска gRPC клиента:
В отдельном терминале запустите gRPC клиент для проверки функционала.
    bash ↓
    PYTHONPATH=$(pwd) poetry run python mlops_service/client_grpc.py

## Примеры запросов

### Проверка статуса:
    bash ↓
    curl -X GET "http://127.0.0.1:8000/status"

### Обучение новой модели:
    bash ↓
    curl -X POST "http://127.0.0.1:8000/train" -H "Content-Type: application/json" -d '{
    "model_type": "RandomForest",
    "hyperparameters": {"n_estimators": 10, "max_depth": 5},
    "num_features": 8
    }'

### Предсказание:
    bash ↓
    curl -X POST "http://127.0.0.1:8000/predict/RandomForest_1" -H "Content-Type: application/json" -d

### Удаление модели:
    bash ↓
    curl -X DELETE "http://127.0.0.1:8000/delete/RandomForest_1"

### Список доступных моделей:
    bash ↓
    curl -X GET "http://127.0.0.1:8000/list_models"

### Автоматически сгенерированная документация доступна по следующим адресам:
Swagger: http://127.0.0.1:8000/docs
ReDoc: http://127.0.0.1:8000/redoc

## Логирование
Логирование всех основных операций доступно в терминале, где запущен FastAPI сервер. Логи также доступны для gRPC сервиса, что позволяет отслеживать выполнение ключевых операций.

## Примечание
* Для gRPC: приложен скрипт client_grpc.py, который позволяет протестировать работу gRPC сервиса. Инструкция по запуску находится в разделе gRPC Сервис.
* gRPC и HTTP API: могут работать параллельно, обеспечивая несколько способов взаимодействия с сервисом.